<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GhostLink // TERMINAL</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;800&family=Oxanium:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Visual Effects -->
    <div class="crt-overlay"></div>
    <div class="scanlines"></div>
    <div class="vignette"></div>
    <div class="grid-bg"></div>

    <div class="ui-frame">
        <div class="corner-decor tl"></div>
        <div class="corner-decor tr"></div>
        <div class="corner-decor bl"></div>
        <div class="corner-decor br"></div>

        <div class="container main-wrapper">
            <header class="header">
                <div class="header-content">
                    <div class="title-group">
                        <h1>GHOSTLINK <span class="version">v1.0</span></h1>
                    </div>
                    <div class="status-badge" id="statusBadge">
                        <span class="status-dot"></span>
                        <span id="statusText">Initializing...</span>
                    </div>
                </div>
            </header>

            <!-- VIEW: HOME (Disconnected) -->
            <div id="view-home" class="view-section active">
                <div class="dashboard-grid">
                    <div class="dashboard-col left">
                        <div class="panel full-height">
                            <div class="panel-header">
                                <span class="panel-title">NETWORK_CONFIG</span>
                                <span id="natTypeDisplay" class="nat-badge">SCANNING</span>
                            </div>
                            
                            <div class="config-display">
                                <div class="config-item">
                                    <div class="info-label">PUBLIC_ENDPOINT</div>
                                    <div class="info-val-group large">
                                        <span class="ip-text" id="myIpDisplay">--.--.--.--</span>
                                        <button class="icon-btn" id="copyBtn">COPY</button>
                                    </div>
                                </div>

                                <div class="config-item">
                                    <div class="info-label">LOCAL_ENDPOINT</div>
                                    <div class="info-val-group large">
                                        <span class="ip-text" id="myLocalIpDisplay">--.--.--.--</span>
                                        <button class="icon-btn" id="copyLocalBtn">COPY</button>
                                    </div>
                                </div>
                                <div id="apiErrorMsg" class="error-msg"></div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-col right">
                        <div class="panel match-panel full-height">
                            <div class="panel-header">
                                <span class="panel-title">TARGET_ACQUISITION</span>
                            </div>
                            <form id="connectForm" class="connect-form-layout">
                                <div class="input-grid">
                                    <div class="input-group">
                                        <label>TARGET_IP</label>
                                        <input type="text" id="peerIp" placeholder="192.168.X.X" autocomplete="off">
                                        <span id="ipError" class="validation-error">INVALID IP FORMAT</span>
                                    </div>
                                    <div class="input-group small">
                                        <label>PORT</label>
                                        <input type="number" id="peerPort" placeholder="8080" min="1" max="65535">
                                        <span id="portError" class="validation-error">INVALID PORT</span>
                                    </div>
                                </div>
                                
                                <div class="action-area">
                                    <button type="submit" class="btn-primary" disabled>INITIATE LINK SEQUENCE</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW: PUNCHING (Connecting) -->
            <div id="view-punching" class="view-section">
                <div class="punch-grid">
                    <div class="matchmaking-column">
                        <div class="matchmaking-display">
                            <div class="match-ring"></div>
                            <div class="match-ring-inner"></div>
                            <div class="timer-container">
                                <div class="timer-label">ESTABLISHING TUNNEL...</div>
                                <!-- ID matches static/script.js logic -->
                                <div class="timer-value" id="punchTimeout">--s</div>
                            </div>
                        </div>
                        
                        <!-- Hidden elements required by static logic -->
                        <div id="vizClientIp" style="display: none;"></div>
                        <div id="vizPeerIp" style="display: none;"></div>

                        <div class="abort-container">
                             <button id="cancelPunchBtn" class="btn-secondary">ABORT SEQUENCE</button>
                        </div>
                    </div>

                    <div class="logs-column">
                        <div class="panel-header compact">
                            <span class="panel-title">SYSTEM_LOGS</span>
                        </div>
                        <div class="terminal-container">
                            <div class="terminal-logs" id="punchLogs"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW: CONNECTED (Chat) -->
            <div id="view-connected" class="view-section">
                <div class="chat-interface">
                    <div class="chat-header">
                        <div class="peer-status">
                            <div class="peer-icon"></div>
                            <div class="peer-info">
                                <div class="peer-name">SECURE UPLINK ESTABLISHED</div>
                                <div class="peer-ip" id="chatPeerIp">...</div>
                            </div>
                        </div>
                        <button id="disconnectBtn" class="btn-danger">TERMINATE UPLINK</button>
                    </div>
                    
                    <div class="chat-viewport" id="chatMessages">
                        <div class="system-msg">CHANNEL ENCRYPTION VERIFIED</div>
                    </div>
                    
                    <form id="chatForm" class="chat-input-area">
                        <span class="prompt">></span>
                        <input type="text" id="chatInput" placeholder="ENTER_COMMAND_OR_MESSAGE..." autocomplete="off">
                        <button type="submit" id="sendBtn" class="btn-send">TRANSMIT</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span class="toast-msg">ALERT</span>
    </div>

    <script src="script.js"></script>
</body>
</html>
